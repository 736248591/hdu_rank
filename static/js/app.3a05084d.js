(function(t){function a(a){for(var e,o,r=a[0],l=a[1],c=a[2],d=0,f=[];d<r.length;d++)o=r[d],n[o]&&f.push(n[o][0]),n[o]=0;for(e in l)Object.prototype.hasOwnProperty.call(l,e)&&(t[e]=l[e]);u&&u(a);while(f.length)f.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,a=0;a<i.length;a++){for(var s=i[a],e=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(e=!1)}e&&(i.splice(a--,1),t=o(o.s=s[0]))}return t}var e={},n={app:0},i=[];function o(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=e,o.d=function(t,a,s){o.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,a){if(1&a&&(t=o(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var e in t)o.d(s,e,function(a){return t[a]}.bind(null,e));return s},o.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(a,"a",a),a},o.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=a,r=r.slice();for(var c=0;c<r.length;c++)a(r[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,a,s){t.exports=s("56d7")},"1a0a":function(t,a,s){},"56d7":function(t,a,s){"use strict";s.r(a);s("cadf"),s("551c"),s("f751"),s("097d");var e=s("2b0e"),n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"app"}},[t._m(0),s("div",{staticClass:"py-5"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table"},[s("caption",[t._v("状态："),s("span",{attrs:{id:"status"}},[t._v(t._s(t.crawlStatus)+"\n                "),s("i",{class:"fa d-inline fa-circle"+t.crawlStatusClass}),t.isAdmin?["stopped"===t.crawlStatus?s("b-button",{attrs:{variant:"link"},on:{click:t.beginCrawl}},[t._v("启动")]):s("b-button",{attrs:{variant:"link"},on:{click:t.stopCrawl}},[t._v("停止")])]:t._e()],2)]),t._m(1),s("tbody",t._l(t.users,function(a,e){return s("tr",{key:a["id"]},[s("td",[t._v(t._s(e+1)+"\n                  "),t.isAdmin?s("i",{staticClass:"fa d-inline fa-lg fa-times text-danger",on:{click:function(s){return t.removeUser(a["id"])}}}):t._e()]),s("td",[t._v(t._s(a["name"]))]),s("td",[t._v(t._s(a["account"]))]),s("td",[t._v(t._s(a["motto"]))]),s("td",["unchecked"===a["status"]?[s("span",{staticClass:"text-warning"},[t._v("待确认")]),t.isAdmin?s("i",{staticClass:"fa d-inline fa-lg fa-check text-success",on:{click:function(s){return t.confirmUser(a["id"])}}}):t._e()]:[t._v(t._s(a["solved_num"]))]],2)])}),0)]),s("div",{staticClass:"py-2"},[s("b-button",{attrs:{variant:"link"},on:{click:function(a){t.addUserModalShow=!0}}},[s("i",{staticClass:"fa fa-plus fa-fw fa-lg py-1"}),s("span",{staticStyle:{"font-size":"110%"}},[t._v("添加账号")])])],1)])])])])]),s("div",{staticClass:"py-3"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12 text-center"},[s("p",{staticClass:"mb-0"},[t._v("Writed By 雪靡. All rights reserved |\n            "),t.isAdmin?s("b-button",{attrs:{variant:"link"},on:{click:t.adminLogout}},[t._v("管理员退出")]):s("b-button",{attrs:{variant:"link"},on:{click:function(a){t.adminLoginModalShow=!0}}},[t._v("管理员登录")])],1)])])])]),s("b-modal",{attrs:{id:"addUserModal",title:"添加用户","ok-title":"确认","cancel-title":"取消","ok-disabled":""===t.formUserName||""===t.formAccount},on:{ok:t.addUser},model:{value:t.addUserModalShow,callback:function(a){t.addUserModalShow=a},expression:"addUserModalShow"}},[s("form",[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-2 col-form-label",attrs:{for:"user_name"}},[t._v("姓名")]),s("div",{staticClass:"col-10"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formUserName,expression:"formUserName"}],staticClass:"form-control",attrs:{type:"text",id:"user_name",placeholder:"请在这里输入您的姓名。"},domProps:{value:t.formUserName},on:{input:function(a){a.target.composing||(t.formUserName=a.target.value)}}})])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-2 col-form-label",attrs:{for:"account"}},[t._v("账号")]),s("div",{staticClass:"col-10"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formAccount,expression:"formAccount"}],staticClass:"form-control",attrs:{type:"text",id:"account",placeholder:"请在这里输入您的杭电的账号名。"},domProps:{value:t.formAccount},on:{input:function(a){a.target.composing||(t.formAccount=a.target.value)}}})]),s("div",{staticClass:"text-right col-12 inline form-text",staticStyle:{margin:"0","font-size":"12px"}},[s("small",{staticClass:"text-right text-danger"},[t._v(" 注意：这里填写的是您杭电的登录账号，不是用户名，请注意！")])])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-2 col-form-label"},[t._v("格言")]),s("div",{staticClass:"col-10"})])]),s("div",{staticClass:"editor"},[s("editor-menu-bar",{attrs:{editor:t.formMotto},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.commands,n=a.isActive;return s("div",{staticClass:"menubar"},[s("button",{staticClass:"menubar__button",class:{"is-active":n.bold()},on:{click:e.bold}},[s("i",{staticClass:"fa fa-bold",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"menubar__button",class:{"is-active":n.italic()},on:{click:e.italic}},[s("i",{staticClass:"fa fa-italic",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"menubar__button",class:{"is-active":n.strike()},on:{click:e.strike}},[s("i",{staticClass:"fa fa-strikethrough",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"menubar__button",class:{"is-active":n.underline()},on:{click:e.underline}},[s("i",{staticClass:"fa fa-underline",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"menubar__button",class:{"is-active":n.code()},on:{click:e.code}},[s("i",{staticClass:"fa fa-code",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"menubar__button",class:{"is-active":n.paragraph()},on:{click:e.paragraph}},[s("i",{staticClass:"fa fa-paragraph",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"menubar__button",class:{"is-active":n.heading({level:1})},on:{click:function(t){return e.heading({level:1})}}},[s("i",{staticClass:"fa fa-header",attrs:{"aria-hidden":"true"}}),t._v("1\n          ")]),s("button",{staticClass:"menubar__button",class:{"is-active":n.heading({level:2})},on:{click:function(t){return e.heading({level:2})}}},[s("i",{staticClass:"fa fa-header",attrs:{"aria-hidden":"true"}}),t._v("2\n          ")]),s("button",{staticClass:"menubar__button",class:{"is-active":n.heading({level:3})},on:{click:function(t){return e.heading({level:3})}}},[s("i",{staticClass:"fa fa-header",attrs:{"aria-hidden":"true"}}),t._v("3\n          ")]),s("button",{staticClass:"menubar__button",class:{"is-active":n.bullet_list()},on:{click:e.bullet_list}},[s("i",{staticClass:"fa fa-list-ul",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"menubar__button",class:{"is-active":n.ordered_list()},on:{click:e.ordered_list}},[s("i",{staticClass:"fa fa-list-ol",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"menubar__button",class:{"is-active":n.blockquote()},on:{click:e.blockquote}},[s("i",{staticClass:"fa fa-quote-right",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"menubar__button",class:{"is-active":n.code_block()},on:{click:e.code_block}},[s("i",{staticClass:"fa fa-code",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"menubar__button",on:{click:e.horizontal_rule}},[t._v("\n            —\n          ")]),s("button",{staticClass:"menubar__button",on:{click:e.undo}},[s("i",{staticClass:"fa fa-undo",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"menubar__button",on:{click:e.redo}},[s("i",{staticClass:"fa fa-repeat",attrs:{"aria-hidden":"true"}})])])}}])}),s("editor-content",{staticClass:"editor__content",attrs:{editor:t.formMotto}})],1)]),s("b-modal",{attrs:{id:"adminLoginModal",title:"管理员登录","ok-title":"确认","cancel-title":"取消"},on:{ok:t.adminLogin},model:{value:t.adminLoginModalShow,callback:function(a){t.adminLoginModalShow=a},expression:"adminLoginModalShow"}},[s("form",{},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"admin_password"}},[t._v("密码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.adminPwd,expression:"adminPwd"}],staticClass:"form-control",attrs:{id:"admin_password",type:"password",placeholder:"请在这里输入管理员密码。"},domProps:{value:t.adminPwd},on:{input:function(a){a.target.composing||(t.adminPwd=a.target.value)}}})])])]),s("b-modal",{attrs:{id:"msgModal",size:"sm",title:t.msgTitle,"ok-title":"确认","cancel-title":"取消","ok-only":t.msgOkOnly},on:{ok:t.msgOkCallback,cancel:t.msgCancelCallback},model:{value:t.msgVisible,callback:function(a){t.msgVisible=a},expression:"msgVisible"}},[s("p",{class:t.msgClass,domProps:{innerHTML:t._s(t.msg)}})])],1)},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"py-5"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("h1",{staticClass:"text-center shadow-none"},[s("b",{staticStyle:{"font-weight":"bold"}},[t._v("HDU排行榜")])])])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",[t._v("#")]),s("th",[t._v("姓名")]),s("th",[t._v("账号")]),s("th",[t._v("格言")]),s("th",[t._v("题数")])])])}],o=s("cd42"),r=s("f23d"),l=s("c53e"),c={components:{EditorContent:o["b"],EditorMenuBar:o["c"]},name:"app",data:function(){return{crawlStatus:"",isAdmin:!1,users:[],formUserName:"",formAccount:"",formMotto:new o["a"]({extensions:[new r["a"],new r["c"],new r["e"],new r["f"],new r["g"]({levels:[1,2,3]}),new r["i"],new r["l"],new r["m"],new r["o"],new r["p"],new r["b"],new r["d"],new r["j"],new r["k"],new r["n"],new r["q"],new r["h"]],content:"<p>这家伙很懒，什么都没写</p>"}),msg:"",msgClass:"",msgTitle:"",msgOkCallback:function(){},msgCancelCallback:function(){},msgOkOnly:!1,msgVisible:!1,adminPwd:"",adminLoginModalShow:!1,addUserModalShow:!1}},methods:{getRank:function(){var t=this;this.$ajax.get("/get_rank").then(function(a){console.log(a),a["status"]&&(t.users=a["users"])})},addUser:function(){var t=this;console.log(this.formMotto.getHTML());var a={name:this.formUserName,account:this.formAccount,motto:this.formMotto.getHTML()};this.$ajax.get("/add",{params:a}).then(function(a){a.status?t.showMsgModal("提示","操作成功！",function(){t.getRank()}):t.showMsgModal("错误",a.msg)})},removeUser:function(t){var a=this;this.showMsgModal("提示","是否确认删除？",function(){a.$ajax.get("/remove",{params:{id:t}}).then(function(t){t.status?a.getRank():a.showMsgModal("错误",t.msg)})},function(){},!1)},confirmUser:function(t){var a=this;this.$ajax.get("/confirm",{params:{id:t}}).then(function(t){t.status?a.getRank():a.showMsgModal("错误",t.msg)})},adminLogin:function(){var t=this,a=new l("SHA3-512","TEXT"),s=Math.floor((new Date).getTime()/1e4);console.log("time:"+s),a.update(s+this.adminPwd+s);var e=a.getHash("HEX");console.log("token:"+e),this.$ajax.get("/login_admin",{params:{pwd:e}}).then(function(a){a.status?t.getLoginInfo():t.showMsgModal("错误",a["msg"])})},adminLogout:function(){var t=this;this.$ajax.get("/logout_admin").then(function(a){a.status?t.getLoginInfo():t.showMsgModal("错误",a.msg)})},getLoginInfo:function(){var t=this;this.$ajax.get("/get_login_info").then(function(a){a.status?t.isAdmin=a["is_admin"]:t.showMsgModal("错误",a["msg"])})},beginCrawl:function(){var t=this;this.$ajax.get("/crawl_start").then(function(a){a.status?t.getCrawlStatus():t.showMsgModal("错误",a["msg"])})},stopCrawl:function(){var t=this;this.$ajax.get("/crawl_stop").then(function(a){a.status?t.getCrawlStatus():t.showMsgModal("错误",a["msg"])})},getCrawlStatus:function(){var t=this;this.$ajax.get("/crawl_status").then(function(a){a.status?t.crawlStatus=a["crawl_status"]:t.showMsgModal("错误",a["msg"])})},showMsgModal:function(t,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.msgTitle=t,this.msg=a,this.msgOkCallback=s,this.msgCancelCallback=e,this.msgOkOnly=n,this.msgVisible=!0}},computed:{crawlStatusClass:function(){return"stopped"===this.crawlStatus?"text-primary":"text-danger"}},mounted:function(){this.getRank(),this.getLoginInfo(),this.getCrawlStatus()},beforeDestroy:function(){this.formMotto.destroy()}},u=c,d=(s("5c0b"),s("2877")),f=Object(d["a"])(u,n,i,!1,null,null,null),m=f.exports,g=s("9f7b"),v=s.n(g),h=(s("a2f0"),s("1a0a"),s("bc3a")),b=s.n(h);e["default"].config.productionTip=!1,e["default"].use(v.a);var p=b.a.create({baseURL:"/api/"});p.interceptors.response.use(function(t){return t.data},function(t){return console.error(t),Promise.reject(t)}),e["default"].prototype.$ajax=p,new e["default"]({render:function(t){return t(m)}}).$mount("#app")},"5c0b":function(t,a,s){"use strict";var e=s("5e27"),n=s.n(e);n.a},"5e27":function(t,a,s){},a2f0:function(t,a,s){}});